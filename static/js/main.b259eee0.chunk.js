(this["webpackJsonpgmy-app"]=this["webpackJsonpgmy-app"]||[]).push([[0],{67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),s=n(37),c=n.n(s),o=(n(67),n(29)),r=n(13),l=n(26),d=n(27),u=(n(68),n(114)),h=n(118),S=n(109),b=n(116),g=n(112),j=n(119),f=n(58),m=(n(69),n(2)),p=function(e){var t=e.data,n=e.columns;return Object(m.jsx)("div",{children:Object(m.jsx)(f.a,{data:t,columns:n,search:!0,sort:!0,pagination:{enabled:!0,limit:20},className:{td:"dense-table-cell light-content",th:"dense-table-cell",footer:"dense-table-cell"}})})},v=n(110),x=n(120),O=n(113),A=n(115),N=n(117),E=n(53),R=n(54),y=function(){function e(t,n,i,a,s){Object(l.a)(this,e),this.Section=t,this.FullName=n,this.StartAddress=i,this.Size=a,this.FileName=s,this.Additonal=[],this.MangledList=[],this.AddressSpaceSize=-1,this.Name=void 0,this.Mangled="";var c=/(\.[^\.]+)(.*)/g.exec(n);c?(this.Name=c[1]||"",this.Mangled=c[2]||""):this.Name=n}return Object(d.a)(e,[{key:"getNumRecords",value:function(){var e=0;return this.Size>0&&(e+=1,this.MangledList.length>0&&this.MangledList.sort((function(e,t){return e.AddressStart-t.AddressStart})).reduce((function(t,n){return t.AddressStart!=n.AddressStart&&e++,n}))),e}},{key:"parse",value:function(e){for(var t,n=/\n[^\.\n](\*[^\n]*| +)(0x[0-9a-fA-F]+|[^ ]+)? *([^\n]*)/gm,i=0,a=!1;null!=(t=n.exec(e));){var s=t[1];if(s)if(s.startsWith("*"))this.Additonal.push(s);else if(""===s.trim()){var c=t[2],o=t[3]?t[3]:"";if(!/^0x([0-9a-fA-F])+$/.test(c)){"[!provide]"!==c.trim()&&console.debug("Ignoring SubSection content '".concat(c,"' in ").concat(this.Section,":").concat(this.Name),e),a=!0;continue}c.length==I.ADDRESS_HEX_LENGTH&&(this.MangledList.push({AddressStart:parseInt(c,16),MangledName:o}),a||(i+=1))}else console.log("Potential SubSection parse issue in ".concat(this.Section,":").concat(this.Name," - strange start: '").concat(s,"' (expected * or ' ')"),e);else console.log("Potential SubSection parse issue in ".concat(this.Section,":").concat(this.Name),e)}return i}}]),e}(),T=function(){function e(t,n,i){Object(l.a)(this,e),this.Name=t,this.StartAddress=n,this.Size=i,this.NumRecords=0,this.AddressSpaceSize=0,this.SubSectionsList=[]}return Object(d.a)(e,[{key:"parse",value:function(e,t){for(var n,i=/ (\.[^ \t\n]+)\n? +(0x[0-9a-fA-F]+) +(0x[0-9a-fA-F]+) ?([^\n]+)?((\n [^\.][^\n]*)*)/gm;null!=(n=i.exec(e));){var a=n[1],s=n[2]?parseInt(n[2]):0,c=n[3]?parseInt(n[3]):0,o=n[4],r=new y(this.Name,a.replace(/\.text.+/,""),s,c,o);n[5]&&r.parse(n[5]),this.SubSectionsList.push(r),t.SubSections.push(r),this.NumRecords+=r.getNumRecords()}return this.SubSectionsList}},{key:"append",value:function(e){0==this.StartAddress?this.StartAddress=e.StartAddress:0!=e.StartAddress&&console.log("undefined behaviour, joining section ".concat(e.Name," - section exists twice with a address")),0==this.Size?this.Size=e.Size:0!=e.Size&&console.log("undefined behaviour, joining section ".concat(e.Name," - section exists twice with a size")),0==this.NumRecords?this.NumRecords=e.NumRecords:0!=e.NumRecords&&console.log("undefined behaviour, joining section ".concat(e.Name," - containing records twice"))}}]),e}(),I=function(){function e(){Object(l.a)(this,e),this.currentPos=0,this.Sections={},this.SubSections=[],this.Archives={}}return Object(d.a)(e,[{key:"parseArchiveMatch",value:function(e,t){e.length<4&&console.log("Unexpected parsing at character ".concat(e.index," - ").concat(t.lastIndex),e[0]);var n={CompilationUnit:e[3],FileLocation:e[1],Symbol:e[2],SymbolCall:e[4]};this.Archives[n.FileLocation]||(this.Archives[n.FileLocation]={Archives:[],File:n.FileLocation,NumRecords:0}),this.Archives[n.FileLocation].NumRecords++,this.Archives[n.FileLocation].Archives.push(n)}},{key:"parseSectionMatch",value:function(e,t){if(e.length<=4)console.log("parser error at: ".concat(e.index," ").concat(t.lastIndex));else if(e.length>=3){var n,i,a=e[1],s=null===(n=e[2])||void 0===n?void 0:n.slice(2),c=null===(i=e[3])||void 0===i?void 0:i.slice(2);if(!a||!s&&c||s&&!c)return void console.warn("possible parsing error at character ".concat(e.index," - ").concat(t.lastIndex));var o=new T(a,s?parseInt(s,16):0,c?parseInt(c,16):0);o.parse(e[4],this),this.Sections[a]?this.Sections[a].append(o):this.Sections[a]=o}else console.log("parser error at: ".concat(e.index," ").concat(t.lastIndex))}},{key:"getSegmentRegex",value:function(t){var n=e.SEGMENT_STARTS_LIST.slice(),i=void 0,a=void 0;return new RegExp(e.ARCHIVE_START,"g").test(t)?(a="ARCHIVE",n.push(e.ARCHIVE_REGEX),i=this.parseArchiveMatch.bind(this)):new RegExp(e.SECTION_START,"g").test(t)&&(a="SECTION",n.push(e.SECTION_REGEX),i=this.parseSectionMatch.bind(this)),{Regex:new RegExp("(".concat(n.join("|"),")"),"gm"),ParseFunction:i,activeSegment:a}}},{key:"parse",value:function(t){for(var n,i={Regex:new RegExp("(".concat(e.SEGMENT_STARTS_LIST.join("|"),")"),"gm"),activeSegment:"START"};null!==(n=i.Regex.exec(t));){if(n[2])n.shift(),i.ParseFunction?i.ParseFunction(n,i.Regex,this):console.debug("unexpected match, no parsing function provided",n[0]);else{var a=i.Regex.lastIndex;(i=this.getSegmentRegex(n[1])).Regex.lastIndex=a}}}}]),e}();I.TurnOnAMPEquality=!1,I.ADDRESS_HEX_LENGTH=18,I.ADDRESS_MATCHER="(0x[0-9a-fA-F]{8,})",I.SECTION_SIZE_MATCHER="(0x[0-9a-fA-F]+)",I.SECTION_REGEX="\n(\\.[^ \n\\t]+)\n? *".concat(I.ADDRESS_MATCHER,"? *").concat(I.SECTION_SIZE_MATCHER,"?([^\n]*(\n [^\n]*)*)"),I.ARCHIVE_REGEX="\n([^\\(\n ]+)\\(([^\\)]+)\\)\n +([^\n ]+) +([^\n]+)",I.ARCHIVE_START="Archive member included to satisfy reference by file[^\n]*",I.SECTION_START="Linker script and memory map[^\n]*",I.SEGMENT_STARTS_LIST=[I.ARCHIVE_START,"Merging program properties[^\n]*","Discarded input sections[^\n]*","Memory Configuration[^\n]*",I.SECTION_START];var _=I;var M=function(e){var t=e.OnLoaded,n=Object(R.useFilePicker)({multiple:!1,accept:[".map"]}),a=Object(r.a)(n,4),s=a[0],c=a[1],o=(a[2],a[3]),l=Object(i.useState)(!1),d=Object(r.a)(l,2),u=d[0],h=d[1],b=Object(i.useState)(!1),g=Object(r.a)(b,2),j=g[0],f=g[1],p=Object(i.useState)(!1),v=Object(r.a)(p,2),x=v[0],y=v[1],T=Object(i.useState)(!1),I=Object(r.a)(T,2),M=I[0],C=I[1];return s[0]&&console.log("loading through filesystem currently not supported!",JSON.stringify(s)),Object(m.jsxs)("div",{children:[c.length>0?Object(m.jsxs)(O.a,{onClose:function(){return c.length=0},severity:"error",children:[Object(m.jsx)(A.a,{children:"Error occured while opening file!"}),JSON.stringify(c)]}):"",x?Object(m.jsxs)(O.a,{onClose:function(){return y(!1)},severity:"warning",children:[Object(m.jsx)(A.a,{children:x}),"Drop the file onto the region."]}):"",j?Object(m.jsxs)(O.a,{onClose:function(){return f(!1)},severity:"error",children:[Object(m.jsx)(A.a,{children:"Loading Dropped file failed!"}),j]}):"",Object(m.jsx)(E.FileDrop,{onDrop:function(e){h(!0),function(e){return 1===(null===e||void 0===e?void 0:e.length)?e.item(0).arrayBuffer().then((function(e){console.log("lets work on the file size: ",e.byteLength);var t="";new Uint8Array(e).forEach((function(e){t+=String.fromCharCode(e)}));var n=new _;return n.parse(t),n})):new Promise((function(t,n){n("provide one file!"),console.error(e)}))}(e).then(t).catch((function(e){return f(e)})).finally((function(){return h(!1)}))},onDragOver:function(){M||(C(!0),console.log("setHover(true)"))},onDragLeave:function(){M&&(C(!1),console.log("setHover(false)"))},children:Object(m.jsx)(S.a,{sx:{p:0,border:"1px dashed grey",m:"auto"},justifyContent:"center",justifyItems:"center",children:Object(m.jsx)(N.a,{disabled:o||u,onClick:function(){y("openFileSelector currently not supported")},sx:{p:3,m:"auto"},fullWidth:!0,style:M?{backgroundColor:"rgba(63, 81, 181, 0.04)"}:{},children:o||u?"Loading ...":"Drop output.map here"})})})]})};function C(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var F=function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(u.a,{animation:!1,height:64}),Object(m.jsx)(u.a,{variant:"rectangular",animation:!1,height:500})]})},L=["Section","SubSection","Address","Size","Demangled Name","Moduled Name","File Name","Mandled Name"],w=function(){function e(){Object(l.a)(this,e),this.Items=[]}return Object(d.a)(e,[{key:"add",value:function(e){var t=[];L.forEach((function(n){t.push(e[n])})),this.Items.push(t)}}]),e}(),D=function(){var e=Object(i.useState)("all"),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(i.useState)([]),c=Object(r.a)(s,2),l=c[0],d=c[1];return Object(m.jsx)(h.a,{maxWidth:"lg",children:Object(m.jsxs)(S.a,{my:4,children:[Object(m.jsx)(b.a,{variant:"h4",component:"h1",gutterBottom:!0,children:"output.map viewer"}),Object(m.jsx)(M,{OnLoaded:function(e){var t=new w;Object.keys(e.Sections).forEach((function(n){e.Sections[n].SubSectionsList.forEach((function(e){var n={"Demangled Name":"","File Name":e.FileName,"Mandled Name":e.Mangled.replace(/$\.(text|data)/g,""),Address:e.StartAddress,Section:e.Section,SubSection:e.Name,Size:e.Size,"Moduled Name":""};e.MangledList.length>0?e.MangledList.forEach((function(e){n["Mandled Name"]=e.MangledName,n.Size=n.Address,n.Address=e.AddressStart,t.add(n)})):t.add(n)}))})),t.add({Address:318,Size:28,SubSection:".interopt",Section:".interopt","Demangled Name":"","Moduled Name":"","File Name":"/usr/lib/gcc/x86_64-linux-gnu/9/../../../x86_64-linux-gnu/Scrt1.o","Mandled Name":""}),d(t.Items)}}),Object(m.jsxs)(v.a,{value:n,children:[Object(m.jsx)(S.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(m.jsxs)(g.a,{value:n,onChange:function(e,t){a(t)},"aria-label":"basic tabs example",children:[Object(m.jsx)(j.a,Object(o.a)({label:"All (DEMO)",value:"all"},C(0))),Object(m.jsx)(j.a,Object(o.a)({label:"By Module (WIP)",value:"by_module"},C(1))),Object(m.jsx)(j.a,Object(o.a)({label:"By File (WIP)",value:"by_file"},C(2))),Object(m.jsx)(j.a,Object(o.a)({label:"By Section (WIP)",value:"by_section"},C(3))),Object(m.jsx)(j.a,Object(o.a)({label:"By SubSection (WIP)",value:"by_subsection"},C(4)))]})}),Object(m.jsx)(x.a,{value:"all",children:Object(m.jsx)(p,{data:l,columns:L})}),Object(m.jsx)(x.a,{value:"by_module",children:Object(m.jsx)(F,{})}),Object(m.jsx)(x.a,{value:"by_file",children:Object(m.jsx)(F,{})}),Object(m.jsx)(x.a,{value:"by_section",children:Object(m.jsx)(F,{})}),Object(m.jsx)(x.a,{value:"by_subsection",children:Object(m.jsx)(F,{})})]})]})})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,121)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),i(e),a(e),s(e),c(e)}))};c.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(D,{})}),document.getElementById("root")),k()}},[[80,1,2]]]);
//# sourceMappingURL=main.b259eee0.chunk.js.map