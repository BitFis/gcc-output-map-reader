(this["webpackJsonpgmy-app"]=this["webpackJsonpgmy-app"]||[]).push([[0],{83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},97:function(e,t,n){"use strict";n.r(t);var i=n(0),s=n.n(i),a=n(45),c=n.n(a),r=(n(83),n(37)),o=n(10),l=n(34),u=n(35),d=(n(84),n(142)),h=n(148),b=n(146),S=n(145),f=n(143),j=n(138),m=n(149),g=n(70),p=(n(85),n(2)),O=function(e){var t=e.data,n=e.columns;return Object(p.jsx)("div",{children:Object(p.jsx)(g.a,{data:t,columns:n,search:!0,sort:!0,pagination:{enabled:!0,limit:200},className:{td:"dense-table-cell light-content",th:"dense-table-cell",footer:"dense-table-cell"}})})},v=n(32),x=n(42),A=n(139),N=n(144),y=n(147),E=n(62),R=n(63);function M(){return T.apply(this,arguments)}function T(){return(T=Object(x.a)(Object(v.a)().mark((function e(){return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,0)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I=function(){function e(t,n,i,s,a){Object(l.a)(this,e),this.Section=t,this.FullName=n,this.StartAddress=i,this.Size=s,this.FullFileName=a,this.Additonal=[],this.MangledList=[],this.AddressSpaceSize=-1,this.Name=void 0,this.Mangled="",this.FileName="",this.Module="";var c=/([^\(]+)\(([^\)]+)/g.exec(a);c?(this.FileName=c[1]||a,this.Module=c[2]||""):this.FileName=a;var r=/(\.[^\.]+)(.*)/g.exec(n);r?(this.Name=r[1]||"",this.Mangled=r[2]||""):this.Name=n}return Object(u.a)(e,[{key:"getNumRecords",value:function(){var e=0;return this.Size>0&&(e+=1,this.MangledList.length>0&&this.MangledList.sort((function(e,t){return e.AddressStart-t.AddressStart})).reduce((function(t,n){return t.AddressStart!=n.AddressStart&&e++,n}))),e}},{key:"parse",value:function(e){for(var t,n=/\n[^\.\n](\*[^\n]*| +)(0x[0-9a-fA-F]+|[^ ]+)? *([^\n]*)/gm,i=0,s=!1,a=0,c=0;null!=(t=n.exec(e));){var r=t[1];if(r)if(r.startsWith("*"))this.Additonal.push(r);else if(""===r.trim()){var o=t[2],l=t[3]?t[3]:"";if(!/^0x([0-9a-fA-F])+$/.test(o)){"[!provide]"!==o.trim()&&console.debug("Ignoring SubSection content '".concat(o,"' in ").concat(this.Section,":").concat(this.Name),e),s=!0;continue}if(o.length==z.ADDRESS_HEX_LENGTH){var u=parseInt(o,16),d=0;this.MangledList.length>0&&(d=u-a),this.MangledList.push({AddressStart:parseInt(o,16),MangledName:l,Size:d}),a=u,c+=d,s||(i+=1)}}else console.log("Potential SubSection parse issue in ".concat(this.Section,":").concat(this.Name," - strange start: '").concat(r,"' (expected * or ' ')"),e);else console.log("Potential SubSection parse issue in ".concat(this.Section,":").concat(this.Name),e)}return this.MangledList.length>0&&(this.Size-c<0?console.error("Issue while parsing, got negative number? ".concat(this.Size," - ").concat(c," = ").concat(this.Size-c),this):this.MangledList[0].Size=this.Size-c),i}}]),e}(),C=function(){function e(t,n,i){Object(l.a)(this,e),this.Name=t,this.StartAddress=n,this.Size=i,this.NumRecords=0,this.AddressSpaceSize=0,this.SubSectionsList=[]}return Object(u.a)(e,[{key:"parse",value:function(e,t){for(var n,i=/ (\.[^ \t\n]+|COMMON)\n? +(0x[0-9a-fA-F]+) +(0x[0-9a-fA-F]+) ?([^\n]+)?((\n [^\.*][^\n]*)*)/gm;null!=(n=i.exec(e));){var s=n[1],a=n[2]?parseInt(n[2]):0,c=n[3]?parseInt(n[3]):0,r=n[4],o=new I(this.Name,s.replace(/\.text.+/,""),a,c,r);n[5]&&o.parse(n[5]),this.SubSectionsList.push(o),t.SubSections.push(o),this.NumRecords+=o.getNumRecords(),"COMMON"===s&&(this.NumRecords-=1)}return this.SubSectionsList}},{key:"append",value:function(e){0==this.StartAddress?this.StartAddress=e.StartAddress:0!=e.StartAddress&&console.log("undefined behaviour, joining section ".concat(e.Name," - section exists twice with a address")),0==this.Size?this.Size=e.Size:0!=e.Size&&console.log("undefined behaviour, joining section ".concat(e.Name," - section exists twice with a size")),0==this.NumRecords?this.NumRecords=e.NumRecords:0!=e.NumRecords&&console.log("undefined behaviour, joining section ".concat(e.Name," - containing records twice"))}}]),e}(),z=function(){function e(){Object(l.a)(this,e),this.currentPos=0,this.Sections={},this.SubSections=[],this.Archives={}}return Object(u.a)(e,[{key:"parseArchiveMatch",value:function(e,t){e.length<4&&console.log("Unexpected parsing at character ".concat(e.index," - ").concat(t.lastIndex),e[0]);var n="".concat(e[1]),i={CompilationUnit:e[3],FileLocation:e[1],Symbol:e[2],SymbolCall:e[4]};this.Archives[n]||(this.Archives[n]={Archives:[],File:i.FileLocation,NumRecords:0}),this.Archives[n].NumRecords++,this.Archives[n].Archives.push(i)}},{key:"parseSectionMatch",value:function(e,t){if(e.length<=4)console.log("parser error at: ".concat(e.index," ").concat(t.lastIndex));else if(e.length>=3){var n,i,s=e[1],a=null===(n=e[2])||void 0===n?void 0:n.slice(2),c=null===(i=e[3])||void 0===i?void 0:i.slice(2);if(!s||!a&&c||a&&!c)return void console.warn("possible parsing error at character ".concat(e.index," - ").concat(t.lastIndex));var r=new C(s,a?parseInt(a,16):0,c?parseInt(c,16):0);r.parse(e[4],this),this.Sections[s]?this.Sections[s].append(r):this.Sections[s]=r}else console.log("parser error at: ".concat(e.index," ").concat(t.lastIndex))}},{key:"getSegmentRegex",value:function(t){var n=e.SEGMENT_STARTS_LIST.slice(),i=void 0,s=void 0;return new RegExp(e.ARCHIVE_START,"g").test(t)?(s="ARCHIVE",n.push(e.ARCHIVE_REGEX),i=this.parseArchiveMatch.bind(this)):new RegExp(e.SECTION_START,"g").test(t)&&(s="SECTION",n.push(e.SECTION_REGEX),i=this.parseSectionMatch.bind(this)),{Regex:new RegExp("(".concat(n.join("|"),")"),"gm"),ParseFunction:i,activeSegment:s}}},{key:"parse",value:function(){var t=Object(x.a)(Object(v.a)().mark((function t(n){var i,s,a;return Object(v.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i={Regex:new RegExp("(".concat(e.SEGMENT_STARTS_LIST.join("|"),")"),"gm"),activeSegment:"START"};case 1:if(null===(s=i.Regex.exec(n))){t.next=8;break}return s[2]?(s.shift(),i.ParseFunction?i.ParseFunction(s,i.Regex,this):console.debug("unexpected match, no parsing function provided",s[0])):(a=i.Regex.lastIndex,(i=this.getSegmentRegex(s[1])).Regex.lastIndex=a),t.next=6,M();case 6:t.next=1;break;case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),e}();z.TurnOnAMPEquality=!1,z.ADDRESS_HEX_LENGTH=18,z.ADDRESS_MATCHER="(0x[0-9a-fA-F]{8,})",z.SECTION_SIZE_MATCHER="(0x[0-9a-fA-F]+)",z.SECTION_REGEX="\n(\\.[^ \n\\t]+)\n? *".concat(z.ADDRESS_MATCHER,"? *").concat(z.SECTION_SIZE_MATCHER,"?([^\n]*(\n [^\n]*)*)"),z.ARCHIVE_REGEX="\n([^\\(\n ]+)\\(([^\\)]+)\\)\n +([^\n ]+) +([^\n]+)",z.ARCHIVE_START="Archive member included to satisfy reference by file[^\n]*",z.SECTION_START="Linker script and memory map[^\n]*",z.SEGMENT_STARTS_LIST=[z.ARCHIVE_START,"Merging program properties[^\n]*","Discarded input sections[^\n]*","Memory Configuration[^\n]*",z.SECTION_START];var _=z;var w=function(e){var t=e.OnLoaded,n=Object(R.useFilePicker)({multiple:!1,accept:[".map"]}),s=Object(o.a)(n,4),a=s[0],c=s[1],r=(s[2],s[3]),l=Object(i.useState)(!1),u=Object(o.a)(l,2),d=u[0],h=u[1],S=Object(i.useState)(!1),f=Object(o.a)(S,2),j=f[0],m=f[1],g=Object(i.useState)(!1),O=Object(o.a)(g,2),M=O[0],T=O[1],I=Object(i.useState)(!1),C=Object(o.a)(I,2),z=C[0],w=C[1];return a[0]&&console.log("loading through filesystem currently not supported!",JSON.stringify(a)),Object(p.jsxs)("div",{children:[c.length>0?Object(p.jsxs)(A.a,{onClose:function(){return c.length=0},severity:"error",children:[Object(p.jsx)(N.a,{children:"Error occured while opening file!"}),JSON.stringify(c)]}):"",M?Object(p.jsxs)(A.a,{onClose:function(){return T(!1)},severity:"warning",children:[Object(p.jsx)(N.a,{children:M}),"Drop the file onto the region."]}):"",j?Object(p.jsxs)(A.a,{onClose:function(){return m(!1)},severity:"error",children:[Object(p.jsx)(N.a,{children:"Loading Dropped file failed!"}),j]}):"",Object(p.jsx)(E.FileDrop,{onDrop:function(e){h(!0),function(e){return 1===(null===e||void 0===e?void 0:e.length)?e.item(0).arrayBuffer().then(function(){var e=Object(x.a)(Object(v.a)().mark((function e(t){var n,i;return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("lets work on the file size: ",t.byteLength),n="",new Uint8Array(t).forEach((function(e){n+=String.fromCharCode(e)})),i=new _,e.next=6,i.parse(n);case 6:return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):new Promise((function(t,n){n("provide one file!"),console.error(e)}))}(e).then(t).catch((function(e){return m(e)})).finally((function(){return h(!1)}))},onDragOver:function(){z||(w(!0),console.log("setHover(true)"))},onDragLeave:function(){z&&(w(!1),console.log("setHover(false)"))},children:Object(p.jsx)(b.a,{sx:{p:0,border:"1px dashed grey",m:"auto"},justifyContent:"center",justifyItems:"center",children:Object(p.jsx)(y.a,{disabled:r||d,onClick:function(){T("openFileSelector currently not supported")},sx:{p:3,m:"auto"},fullWidth:!0,style:z?{backgroundColor:"rgba(63, 81, 181, 0.04)"}:{},children:r||d?"Loading ... (Will currently block any interaction)":"Drop output.map here"})})})]})},F=n(136),L=n(150),k=n(65),D=n.n(k);function H(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var P=function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)(d.a,{animation:!1,height:64}),Object(p.jsx)(d.a,{variant:"rectangular",animation:!1,height:500})]})},B=["Module","Size no .bss",{name:"Size",formatter:function(e){return G(e)}},"Num of records"],G=function(e){var t=e;e-=e%1e3;var n=Math.floor(e/1e3%1e3);e-=n;var i=Math.floor(e/1e3/1e3);return i>0?"".concat(t," (+").concat(i,"M)"):n>0?"".concat(t," (+").concat(n,"K)"):"".concat(t)},W=["Section","SubSection","AddressHex",{name:"Size",formatter:function(e){return G(e)}},"Demangled Name","Moduled Name","File Name","Mandled Name"],V=function(){function e(t){Object(l.a)(this,e),this.ColumnsOrder=t,this.Items=[]}return Object(u.a)(e,[{key:"add",value:function(e){var t=[];this.ColumnsOrder.forEach((function(n){t.push(e[n])})),this.Items.push(t)}}]),e}(),X=function(e){return"0x"+"0000000000000000".concat(e.toString(16)).slice(-16)},J=function(){var e=Object(i.useState)("all"),t=Object(o.a)(e,2),n=t[0],s=t[1],a=Object(i.useState)([]),c=Object(o.a)(a,2),l=c[0],u=c[1],d=Object(i.useState)([]),g=Object(o.a)(d,2),v=g[0],x=g[1];return Object(p.jsx)(h.a,{maxWidth:"lg",children:Object(p.jsxs)(b.a,{my:4,children:[Object(p.jsxs)(S.a,{variant:"h4",component:"h1",gutterBottom:!0,children:[Object(p.jsx)(f.a,{href:"./gcc-output-map-web-renderer.zip",children:Object(p.jsx)(D.a,{color:"action"})}),"output.map viewer"]}),Object(p.jsx)(w,{OnLoaded:function(e){var t=new V(W.map((function(e){return e.name||e}))),n=new V(B.map((function(e){return e.name||e}))),i={"Num of records":0,"Size no .bss":-1,Module:"",Size:0},s={};Object.keys(e.Archives).forEach((function(t){s[t]={"Num of records":0,"Size no .bss":-1,Module:t,Size:0,File:e.Archives[t].File}})),Object.keys(e.Sections).forEach((function(n){e.Sections[n].SubSectionsList.forEach((function(e){var n={"Demangled Name":"","File Name":e.FileName,"Mandled Name":e.Mangled.replace(/$\.(text|data)/g,""),Address:e.StartAddress,AddressHex:X(e.StartAddress),Section:e.Section,SubSection:e.Name,Size:e.Size,"Moduled Name":""},a=s[e.FileName];a||(a=i),a.Size+=e.Size,e.MangledList.length>0?e.MangledList.forEach((function(e){n["Mandled Name"]=e.MangledName,n.Size=e.Size,n.Address=e.AddressStart,n.AddressHex=X(e.AddressStart),t.add(n),e.Size>0&&a["Num of records"]++})):(e.Size>0&&a["Num of records"]++,t.add(n))}))})),n.add(i),Object.keys(s).forEach((function(e){n.add({"Num of records":s[e]["Num of records"],"Size no .bss":s[e]["Size no .bss"],Module:s[e].Module,Size:s[e].Size})})),u(t.Items),x(n.Items)}}),Object(p.jsxs)(F.a,{value:n,children:[Object(p.jsx)(b.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(p.jsxs)(j.a,{value:n,onChange:function(e,t){s(t)},"aria-label":"basic tabs example",children:[Object(p.jsx)(m.a,Object(r.a)({label:"All",value:"all"},H(0))),Object(p.jsx)(m.a,Object(r.a)({label:"By Module",value:"by_module"},H(1))),Object(p.jsx)(m.a,Object(r.a)({label:"By File (WIP)",value:"by_file"},H(2))),Object(p.jsx)(m.a,Object(r.a)({label:"By Section (WIP)",value:"by_section"},H(3))),Object(p.jsx)(m.a,Object(r.a)({label:"By SubSection (WIP)",value:"by_subsection"},H(4)))]})}),Object(p.jsx)(L.a,{value:"all",children:Object(p.jsx)(O,{data:l,columns:W})}),Object(p.jsx)(L.a,{value:"by_module",children:Object(p.jsx)(O,{data:v,columns:B})}),Object(p.jsx)(L.a,{value:"by_file",children:Object(p.jsx)(P,{})}),Object(p.jsx)(L.a,{value:"by_section",children:Object(p.jsx)(P,{})}),Object(p.jsx)(L.a,{value:"by_subsection",children:Object(p.jsx)(P,{})})]})]})})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,151)).then((function(t){var n=t.getCLS,i=t.getFID,s=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),i(e),s(e),a(e),c(e)}))};c.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(J,{})}),document.getElementById("root")),U()}},[[97,1,2]]]);